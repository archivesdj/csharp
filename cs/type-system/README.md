# 타입 시스템

프로그래밍 언어의 "타입 시스템(Type System)"은 변수와 값의 유형을 정의하고 조작하는 규칙의 집합을 의미합니다. 타입 시스템은 코드의 안정성, 가독성, 유지보수성 등을 증가시키는 데 기여하며, 컴파일러나 인터프리터가 코드를 해석하고 실행할 때 발생하는 오류를 줄여줍니다. C#은 강력한 정적 타입 지정 언어로, 코드에서 변수 및 표현식의 타입을 컴파일 시에 결정합니다.

## 개념

다음은 C#의 주요 타입 시스템 개념입니다:

1. **값 타입(Value Types) 및 참조 타입(Reference Types):**
    - **값 타입:** 변수가 해당 값을 직접 포함하며, 스택에 저장됩니다. `struct`, 숫자형, 문자 등이 여기에 속합니다.
    - **참조 타입:** 변수가 값 대신 해당 값이 위치한 메모리 주소를 가리키며, 힙에 저장됩니다. `class`, `interface`, `delegate` 등이 여기에 속합니다.

2. **클래스와 인터페이스:**
    - **클래스:** 객체 지향 프로그래밍에서 주요 구성 요소로 사용되며, 데이터와 해당 데이터를 처리하는 메서드를 포함합니다.
    - **인터페이스:** 클래스가 구현할 메서드, 속성, 이벤트, 인덱서 등을 정의하는 계약입니다.

3. **구조체(Structures):**
    - 값 형식 중의 하나로, 클래스와 유사하지만 스택에 할당되므로 메모리 효율성이 높습니다.

4. **열거형(Enum):**
    - 관련된 상수 값을 정의하는 데 사용되는 사용자 정의 타입입니다.

5. **배열(Arrays):**
    - 동일한 타입의 요소로 구성된 순서 있는 컬렉션입니다.

6. **제네릭(Generic) 타입:**
    - 일반적인 알고리즘 및 데이터 구조를 작성할 때 타입을 매개변수화할 수 있도록 하는 기능입니다.

7. **델리게이트(Delegate) 및 이벤트(Event):**
    - 델리게이트는 메서드의 참조를 저장하고 호출하는데 사용되며, 이벤트는 델리게이트를 통해 발생한 특정 사건에 대한 알림 메커니즘을 제공합니다.

8. **동적 타입(Dynamic Type):**
    - C# 4.0 이상에서 추가된 기능으로, 실행 시간에 타입을 동적으로 결정할 수 있도록 하는 `dynamic` 키워드를 제공합니다.

타입 시스템은 코드의 안정성과 가독성을 높이기 위해 적절한 타입을 선택하고 사용하는 것이 중요합니다. C#의 강력한 정적 타입 지정은 개발자가 컴파일 시에 오류를 미리 잡을 수 있도록 도와주며, 코드의 이해와 유지보수를 향상시킵니다.

## 값 vs. 참조

C#에서 변수의 데이터 타입은 크게 값 타입(Value Type)과 참조 타입(Reference Type)으로 나뉩니다. 이 두 타입은 메모리에서 값이 저장되고 전달되는 방식 등에서 차이가 있습니다.

**값 타입과 참조 타입의 관계도** (from [Microsoft Documents](https://learn.microsoft.com/en-us/dotnet/csharp/fundamentals/types/))

![relationship between value types and reference types](https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/types/media/index/value-reference-types-common-type-system.png)

### 값 타입 (Value Type)

1. **스택(Stack)에 저장:** 값 타입의 변수들은 스택 메모리에 직접 저장됩니다. 스택은 효율적이고 빠르게 데이터를 관리할 수 있도록 설계되어 있습니다.

2. **직접 값을 포함:** 값 타입 변수는 해당 값 자체를 포함하고 있습니다. 따라서 값 타입 변수 간의 할당 및 복사는 값을 복제하는 것이므로 서로 독립적입니다.

3. **단순하고 빠른 연산:** 값 타입은 단순한 데이터를 표현하고, 값이 복사되므로 연산이 간단하고 빠릅니다.

4. **기본 데이터 형식들이 대표적인 예시:** `int`, `float`, `char`, `struct` 등이 값 타입에 해당합니다.

```csharp
int x = 10;
int y = x; // 값이 복사됨
x = 20;

Console.WriteLine(y); // 출력: 10
```

### 참조 타입 (Reference Type)

1. **힙(Heap)에 저장:** 참조 타입의 변수들은 힙 메모리에 객체가 생성되고, 변수는 해당 객체를 가리키는 주소를 가지게 됩니다.

2. **주소를 참조:** 참조 타입 변수는 값 대신 객체의 주소를 참조하므로, 여러 변수가 하나의 객체를 참조할 수 있습니다.

3. **객체 생명 주기:** 힙에 생성된 객체는 가비지 컬렉터에 의해 관리되며, 더 이상 참조되지 않는 경우 메모리에서 제거됩니다.

4. **복잡한 데이터 구조에 유리:** 참조 타입은 복잡한 데이터 구조를 표현하기에 유리하며, 객체 간의 관계를 표현할 때 효과적입니다.

5. **기본적으로 `class`가 대표적인 예시:** 사용자 정의 클래스, `string`, `object` 등이 참조 타입에 해당합니다.

```csharp
class Person
{
    public string Name;
}

Person person1 = new Person();
person1.Name = "John";

Person person2 = person1; // 주소가 복사됨
person1.Name = "Jane";

Console.WriteLine(person2.Name); // 출력: Jane
```

참조 타입의 변수들은 주소를 참조하므로 하나를 변경하면 다른 변수에도 영향을 미칩니다. 이러한 특징을 이해하고 사용함으로써 메모리 관리와 데이터 구조 설계에 더 효과적으로 대응할 수 있습니다.
